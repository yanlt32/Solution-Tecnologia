<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Admin - Solution Tecnologia</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary-light: #8906E6; /* Roxo */
      --primary-dark: #050DEB; /* Azul */
      --secondary-light: #FF00E2; /* Rosa */
      --accent-light: #FF9F0A;
      --success-light: #30D158;
      --danger-light: #FF453A;
      --warning-light: #FF9F0A;
      --text-light: #1C1C1E;
      --text-secondary-light: #636366;
      --background-light: #F5F5F7;
      --surface-light: #FFFFFF;
      --border-light: #E5E5EA;
      --primary: #8906E6; /* Added for Chart.js compatibility */

      --primary-dark-dark: #FF00E2; /* Rosa */
      --secondary-dark: #050DEB; /* Azul */
      --accent-dark: #FF9F0A;
      --success-dark: #30D158;
      --danger-dark: #FF453A;
      --warning-dark: #FF9F0A;
      --text-dark: #FFFFFF;
      --text-secondary-dark: #A1A1A6;
      --background-dark: #121212;
      --surface-dark: #1E1E1E;
      --border-dark: #2C2C2E;

      --border-radius: 12px;
      --sidebar-width: 240px;
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'SF Pro Display', sans-serif;
    }

    body {
      background-color: var(--background-dark);
      color: var(--text-dark);
      line-height: 1.6;
      font-weight: 400;
      -webkit-font-smoothing: antialiased;
      transition: background-color 0.3s ease;
    }

    body[data-theme="light"] {
      background-color: var(--background-light);
      color: var(--text-light);
    }

    .dashboard-container {
      display: flex;
      min-height: 100vh;
    }

    .sidebar {
      width: var(--sidebar-width);
      background: var(--surface-dark);
      color: var(--text-dark);
      padding: 0;
      transition: var(--transition);
      border-right: 1px solid var(--border-dark);
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.2);
      display: flex;
      flex-direction: column;
    }

    body[data-theme="light"] .sidebar {
      background: var(--surface-light);
      color: var(--text-light);
      border-right: 1px solid var(--border-light);
    }

    .sidebar-header {
      padding: 24px 20px;
      border-bottom: 1px solid var(--border-dark);
      text-align: center;
    }

    body[data-theme="light"] .sidebar-header {
      border-bottom: 1px solid var(--border-light);
    }

    .sidebar-header img.logo {
      width: 80px;
      height: auto;
      margin-bottom: 8px;
    }

    .sidebar-header h2 {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: 20px;
      font-weight: 700;
      color: var(--text-dark);
    }

    body[data-theme="light"] .sidebar-header h2 {
      color: var(--text-light);
    }

    .sidebar-header h2 i {
      color: var(--primary-dark);
      background: rgba(137, 6, 230, 0.2);
      width: 36px;
      height: 36px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    body[data-theme="light"] .sidebar-header h2 i {
      color: var(--primary-light);
    }

    .user-info {
      padding: 20px;
      margin-bottom: 0;
      border-bottom: 1px solid var(--border-dark);
    }

    body[data-theme="light"] .user-info {
      border-bottom: 1px solid var(--border-light);
    }

    .user-info p {
      margin-bottom: 6px;
      font-size: 14px;
      color: var(--text-secondary-dark);
    }

    body[data-theme="light"] .user-info p {
      color: var(--text-secondary-light);
    }

    .user-info .role-badge {
      display: inline-block;
      background: var(--primary-dark);
      color: var(--text-dark);
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      margin-top: 6px;
    }

    body[data-theme="light"] .user-info .role-badge {
      background: var(--primary-light);
      color: var(--text-light);
    }

    .nav-menu {
      list-style: none;
      padding: 12px;
      flex-grow: 1;
    }

    .nav-item {
      margin-bottom: 4px;
    }

    .nav-link {
      display: flex;
      align-items: center;
      padding: 12px 14px;
      color: var(--text-secondary-dark);
      text-decoration: none;
      transition: var(--transition);
      gap: 10px;
      border-radius: var(--border-radius);
      font-size: 14px;
      font-weight: 500;
      position: relative;
    }

    body[data-theme="light"] .nav-link {
      color: var(--text-secondary-light);
    }

    .nav-link:hover {
      background: rgba(137, 6, 230, 0.1);
      color: var(--primary-dark);
    }

    body[data-theme="light"] .nav-link:hover {
      color: var(--primary-light);
    }

    .nav-link.active {
      background: rgba(137, 6, 230, 0.2);
      color: var(--primary-dark);
      font-weight: 600;
    }

    body[data-theme="light"] .nav-link.active {
      color: var(--primary-light);
    }

    .nav-link.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      height: 18px;
      width: 4px;
      background: var(--primary-dark);
      border-radius: 0 2px 2px 0;
    }

    body[data-theme="light"] .nav-link.active::before {
      background: var(--primary-light);
    }

    .nav-link i {
      width: 18px;
      text-align: center;
      font-size: 16px;
    }

    .sidebar-footer {
      padding: 12px;
      border-top: 1px solid var(--border-dark);
      font-size: 11px;
      color: var(--text-secondary-dark);
      text-align: center;
    }

    body[data-theme="light"] .sidebar-footer {
      border-top: 1px solid var(--border-light);
      color: var(--text-secondary-light);
    }

    .main-content {
      flex: 1;
      padding: 24px;
      overflow-y: auto;
      background: var(--background-dark);
    }

    body[data-theme="light"] .main-content {
      background: var(--background-light);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border-dark);
    }

    body[data-theme="light"] .header {
      border-bottom: 1px solid var(--border-light);
    }

    .header h1 {
      color: var(--text-dark);
      font-size: 28px;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    body[data-theme="light"] .header h1 {
      color: var(--text-light);
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .notification-btn {
      background: transparent;
      border: none;
      color: var(--text-secondary-dark);
      font-size: 16px;
      cursor: pointer;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      position: relative;
    }

    body[data-theme="light"] .notification-btn {
      color: var(--text-secondary-light);
    }

    .notification-btn:hover {
      background: rgba(137, 6, 230, 0.1);
      color: var(--primary-dark);
    }

    body[data-theme="light"] .notification-btn:hover {
      color: var(--primary-light);
    }

    .notification-badge {
      position: absolute;
      top: 0;
      right: 0;
      background: var(--danger-light);
      color: white;
      font-size: 9px;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logout-btn {
      background: var(--danger-light);
      color: var(--text-dark);
      border: none;
      padding: 10px 16px;
      border-radius: var(--border-radius);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: var(--transition);
      font-weight: 500;
      font-size: 14px;
      box-shadow: 0 4px 12px rgba(255, 69, 58, 0.2);
    }

    body[data-theme="light"] .logout-btn {
      color: var(--text-light);
    }

    .logout-btn:hover {
      background: #D70015;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(255, 69, 58, 0.3);
    }

    .welcome-banner {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary-dark-dark));
      color: var(--text-dark);
      padding: 24px;
      border-radius: var(--border-radius);
      margin-bottom: 24px;
      box-shadow: 0 10px 30px rgba(137, 6, 230, 0.25);
      position: relative;
      overflow: hidden;
      transition: transform 0.3s ease;
    }

    body[data-theme="light"] .welcome-banner {
      background: linear-gradient(135deg, var(--primary-light), var(--primary-dark));
      color: var(--text-light);
    }

    .welcome-banner:hover {
      transform: translateY(-5px);
    }

    .welcome-banner::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -20%;
      width: 300px;
      height: 300px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
    }

    .welcome-banner h2 {
      margin-bottom: 10px;
      font-size: 22px;
      font-weight: 700;
      position: relative;
      z-index: 1;
    }

    .welcome-banner p {
      opacity: 0.9;
      font-size: 15px;
      max-width: 500px;
      position: relative;
      z-index: 1;
    }

    .stats-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: var(--surface-dark);
      padding: 20px;
      border-radius: var(--border-radius);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      gap: 14px;
      border: 1px solid var(--border-dark);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    body[data-theme="light"] .stat-card {
      background: var(--surface-light);
      border: 1px solid var(--border-light);
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }

    .stat-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: var(--primary-dark);
    }

    body[data-theme="light"] .stat-card::after {
      background: var(--primary-light);
    }

    .stat-card:nth-child(2)::after { background: var(--success-light); }
    .stat-card:nth-child(3)::after { background: var(--warning-light); }
    .stat-card:nth-child(4)::after { background: var(--danger-light); }

    .stat-icon {
      width: 50px;
      height: 50px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      color: var(--text-dark);
      transition: transform 0.3s ease;
    }

    body[data-theme="light"] .stat-icon {
      color: var(--text-light);
    }

    .stat-card:hover .stat-icon {
      transform: scale(1.1);
    }

    .itil-icon { background: var(--primary-dark); box-shadow: 0 6px 15px rgba(137, 6, 230, 0.3); }
    .lgpd-icon { background: var(--success-light); box-shadow: 0 6px 15px rgba(48, 209, 88, 0.3); }
    .status-icon { background: var(--warning-light); box-shadow: 0 6px 15px rgba(255, 159, 10, 0.3); }
    .users-icon { background: var(--danger-light); box-shadow: 0 6px 15px rgba(255, 69, 58, 0.3); }

    body[data-theme="light"] .itil-icon { background: var(--primary-light); }

    .stat-info h3 {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 4px;
      color: var(--text-dark);
      letter-spacing: -0.5px;
    }

    body[data-theme="light"] .stat-info h3 {
      color: var(--text-light);
    }

    .stat-info p {
      color: var(--text-secondary-dark);
      font-size: 14px;
      font-weight: 500;
    }

    body[data-theme="light"] .stat-info p {
      color: var(--text-secondary-light);
    }

    .charts-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }

    .chart-card {
      background: var(--surface-dark);
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border: 1px solid var(--border-dark);
      transition: var(--transition);
    }

    body[data-theme="light"] .chart-card {
      background: var(--surface-light);
      border: 1px solid var(--border-light);
    }

    .chart-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .chart-header h3 {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-dark);
    }

    body[data-theme="light"] .chart-header h3 {
      color: var(--text-light);
    }

    .chart-filter {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid var(--border-dark);
      color: var(--text-dark);
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
      cursor: pointer;
      transition: var(--transition);
    }

    body[data-theme="light"] .chart-filter {
      border: 1px solid var(--border-light);
      color: var(--text-light);
    }

    .chart-filter:hover {
      background: rgba(137, 6, 230, 0.15);
    }

    .chart-container {
      position: relative;
      height: 220px;
      width: 100%;
    }

    .status-panel {
      background: var(--surface-dark);
      border-radius: var(--border-radius);
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border: 1px solid var(--border-dark);
    }

    body[data-theme="light"] .status-panel {
      background: var(--surface-light);
      border: 1px solid var(--border-light);
    }

    .status-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .status-header h2 {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-dark);
    }

    body[data-theme="light"] .status-header h2 {
      color: var(--text-light);
    }

    .status-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 20px;
    }

    .status-item {
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--border-radius);
      padding: 16px;
      text-align: center;
      border: 1px solid var(--border-dark);
    }

    body[data-theme="light"] .status-item {
      border: 1px solid var(--border-light);
    }

    .status-item h3 {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 6px;
      color: var(--text-dark);
    }

    body[data-theme="light"] .status-item h3 {
      color: var(--text-light);
    }

    .status-item p {
      color: var(--text-secondary-dark);
      font-size: 14px;
    }

    body[data-theme="light"] .status-item p {
      color: var(--text-secondary-light);
    }

    .status-list {
      list-style: none;
    }

    .status-list-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px;
      border-bottom: 1px solid var(--border-dark);
      transition: var(--transition);
    }

    body[data-theme="light"] .status-list-item {
      border-bottom: 1px solid var(--border-light);
    }

    .status-list-item:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .status-list-item:last-child {
      border-bottom: none;
    }

    .status-info {
      flex: 1;
    }

    .status-value {
      font-weight: 500;
      margin-bottom: 4px;
      color: var(--text-dark);
    }

    body[data-theme="light"] .status-value {
      color: var(--text-light);
    }

    .status-indicator {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 500;
    }

    .status-online {
      background: rgba(48, 209, 88, 0.2);
      color: var(--success-light);
    }

    .status-offline {
      background: rgba(255, 69, 58, 0.2);
      color: var(--danger-light);
    }

    .status-warning {
      background: rgba(255, 159, 10, 0.2);
      color: var(--warning-light);
    }

    .tickets-panel {
      background: var(--surface-dark);
      border-radius: var(--border-radius);
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border: 1px solid var(--border-dark);
    }

    body[data-theme="light"] .tickets-panel {
      background: var(--surface-light);
      border: 1px solid var(--border-light);
    }

    .tickets-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .tickets-header h2 {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-dark);
    }

    body[data-theme="light"] .tickets-header h2 {
      color: var(--text-light);
    }

    .view-all-btn {
      color: var(--primary-dark);
      text-decoration: none;
      font-size: 13px;
      font-weight: 500;
      transition: var(--transition);
    }

    body[data-theme="light"] .view-all-btn {
      color: var(--primary-light);
    }

    .view-all-btn:hover {
      text-decoration: underline;
    }

    .tickets-list {
      list-style: none;
    }

    .ticket-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px;
      border-bottom: 1px solid var(--border-dark);
      transition: var(--transition);
    }

    body[data-theme="light"] .ticket-item {
      border-bottom: 1px solid var(--border-light);
    }

    .ticket-item:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .ticket-item:last-child {
      border-bottom: none;
    }

    .ticket-info {
      flex: 1;
    }

    .ticket-id {
      font-weight: 600;
      color: var(--primary-dark);
      margin-right: 8px;
    }

    body[data-theme="light"] .ticket-id {
      color: var(--primary-light);
    }

    .ticket-title {
      font-weight: 500;
      margin-bottom: 4px;
      color: var(--text-dark);
    }

    body[data-theme="light"] .ticket-title {
      color: var(--text-light);
    }

    .ticket-priority {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 500;
    }

    .priority-high {
      background: rgba(255, 69, 58, 0.2);
      color: var(--danger-light);
    }

    .priority-medium {
      background: rgba(255, 159, 10, 0.2);
      color: var(--warning-light);
    }

    .priority-low {
      background: rgba(48, 209, 88, 0.2);
      color: var(--success-light);
    }

    .actions-section {
      background: var(--surface-dark);
      border-radius: var(--border-radius);
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border: 1px solid var(--border-dark);
    }

    body[data-theme="light"] .actions-section {
      background: var(--surface-light);
      border: 1px solid var(--border-light);
    }

    .actions-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .actions-header h2 {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-dark);
    }

    body[data-theme="light"] .actions-header h2 {
      color: var(--text-light);
    }

    .actions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
    }

    .action-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 12px;
      background: transparent;
      border: 1px solid var(--border-dark);
      border-radius: var(--border-radius);
      color: var(--text-dark);
      text-decoration: none;
      transition: var(--transition);
      font-weight: 500;
      font-size: 14px;
      cursor: pointer;
    }

    body[data-theme="light"] .action-btn {
      border: 1px solid var(--border-light);
      color: var(--text-light);
    }

    .action-btn:hover {
      background: var(--primary-dark);
      color: var(--text-dark);
      border-color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(137, 6, 230, 0.3);
    }

body[sotalo-theme="light"] .action-btn:hover {
  background: var(--primary-light);
  border-color: var(--primary-light);
}


    .activity-section {
      background: var(--surface-dark);
      border-radius: var(--border-radius);
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      border: 1px solid var(--border-dark);
    }

    body[data-theme="light"] .activity-section {
      background: var(--surface-light);
      border: 1px solid var(--border-light);
    }

    .activity-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .activity-header h2 {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-dark);
    }

    body[data-theme="light"] .activity-header h2 {
      color: var(--text-light);
    }

    .activity-list {
      list-style: none;
    }

    .activity-item {
      display: flex;
      padding: 14px 0;
      border-bottom: 1px solid var(--border-dark);
    }

    body[data-theme="light"] .activity-item {
      border-bottom: 1px solid var(--border-light);
    }

    .activity-item:last-child {
      border-bottom: none;
    }

    .activity-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 14px;
      flex-shrink: 0;
    }

    .activity-itil {
      background: rgba(137, 6, 230, 0.2);
      color: var(--primary-dark);
    }

    body[data-theme="light"] .activity-itil {
      color: var(--primary-light);
    }

    .activity-lgpd {
      background: rgba(48, 209, 88, 0.2);
      color: var(--success-light);
    }

    .activity-content {
      flex: 1;
    }

    .activity-title {
      font-weight: 500;
      margin-bottom: 4px;
      color: var(--text-dark);
    }

    body[data-theme="light"] .activity-title {
      color: var(--text-light);
    }

    .activity-desc {
      font-size: 13px;
      color: var(--text-secondary-dark);
      margin-bottom: 4px;
    }

    body[data-theme="light"] .activity-desc {
      color: var(--text-secondary-light);
    }

    .activity-time {
      font-size: 11px;
      color: var(--text-secondary-dark);
    }

    body[data-theme="light"] .activity-time {
      color: var(--text-secondary-light);
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-content {
      background: var(--surface-dark);
      border-radius: var(--border-radius);
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      animation: slideIn 0.3s ease-out;
    }

    body[data-theme="light"] .modal-content {
      background: var(--surface-light);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--border-dark);
    }

    body[data-theme="light"] .modal-header {
      border-bottom: 1px solid var(--border-light);
    }

    .modal-header h3 {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-dark);
    }

    body[data-theme="light"] .modal-header h3 {
      color: var(--text-light);
    }

    .modal-header .close {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: var(--text-secondary-dark);
    }

    body[data-theme="light"] .modal-header .close {
      color: var(--text-secondary-light);
    }

    .modal-body {
      padding: 20px;
    }

    .modal-footer {
      padding: 16px 20px;
      border-top: 1px solid var(--border-dark);
      text-align: right;
    }

    body[data-theme="light"] .modal-footer {
      border-top: 1px solid var(--border-light);
    }

    .btn-cancel {
      background: var(--danger-light);
      color: var(--text-dark);
      border: none;
      padding: 10px 16px;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      font-weight: 500;
    }

    body[data-theme="light"] .btn-cancel {
      color: var(--text-light);
    }

    .btn-cancel:hover {
      background: #D70015;
    }

    .accordion-item {
      margin-bottom: 10px;
    }

    .accordion-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
    }

    body[data-theme="light"] .accordion-header {
      background: rgba(0, 0, 0, 0.05);
    }

    .accordion-header:hover {
      background: rgba(137, 6, 230, 0.1);
    }

    .accordion-header h4 {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-dark);
    }

    body[data-theme="light"] .accordion-header h4 {
      color: var(--text-light);
    }

    .accordion-header i {
      transition: transform 0.3s ease;
    }

    .accordion-header.active i {
      transform: rotate(180deg);
    }

    .accordion-content {
      display: none;
      padding: 12px;
      font-size: 14px;
      color: var(--text-secondary-dark);
    }

    body[data-theme="light"] .accordion-content {
      color: var(--text-secondary-light);
    }

    .accordion-content.active {
      display: block;
    }

    .theme-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary-dark);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      z-index: 100;
      transition: var(--transition);
    }

    body[data-theme="light"] .theme-toggle {
      background: var(--primary-light);
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

    @media (max-width: 1200px) {
      .charts-section {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 992px) {
      .dashboard-container {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border-dark);
      }

      body[data-theme="light"] .sidebar {
        border-bottom: 1px solid var(--border-light);
      }

      .nav-menu {
        display: flex;
        overflow-x: auto;
        padding: 0 12px 12px;
      }

      .nav-item {
        flex-shrink: 0;
      }

      .nav-link {
        padding: 10px 14px;
      }

      .main-content {
        padding: 20px;
      }
    }

    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }

      .header-actions {
        width: 100%;
        justify-content: space-between;
      }

      .stats-cards,
      .actions-grid,
      .status-grid {
        grid-template-columns: 1fr;
      }

      .welcome-banner {
        padding: 20px;
      }

      .welcome-banner h2 {
        font-size: 20px;
      }

      .header h1 {
        font-size: 24px;
      }

      .chart-card {
        padding: 16px;
      }
    }

    @media (max-width: 576px) {
      .main-content {
        padding: 16px;
      }

      .header h1 {
        font-size: 20px;
      }

      .stat-card {
        flex-direction: column;
        text-align: center;
        padding: 16px;
      }

      .welcome-banner::before {
        display: none;
      }

      .ticket-item,
      .activity-item,
      .status-list-item {
        flex-direction: column;
        align-items: flex-start;
      }

      .activity-icon {
        margin-bottom: 10px;
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .stat-card,
    .chart-card,
    .status-panel,
    .tickets-panel,
    .actions-section,
    .activity-section {
      animation: fadeIn 0.5s ease-out forwards;
    }

    .stat-card:nth-child(2) { animation-delay: 0.1s; }
    .stat-card:nth-child(3) { animation-delay: 0.2s; }
    .stat-card:nth-child(4) { animation-delay: 0.3s; }
  </style>
</head>
<body data-theme="dark">
  <div class="dashboard-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <img src="logo1.png" alt="Solution Tecnologia Logo" class="logo">
        <h2>Solution Tecnologia</h2>
      </div>

      <div class="user-info">
        <p>Bem-vindo, <strong id="username">Administrador</strong></p>
        <p><span class="role-badge" id="userrole">Administrador</span></p>
      </div>

      <ul class="nav-menu">
        <li class="nav-item">
          <a href="admin.html" class="nav-link active">
            <i class="fas fa-home"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="itilAdm.html" class="nav-link">
            <i class="fas fa-tasks"></i>
            <span>Gestão de Chamados</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="lgpd-adm.html" class="nav-link">
            <i class="fas fa-shield-alt"></i>
            <span>Gestão LGPD</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="network.html" class="nav-link">
            <i class="fas fa-network-wired"></i>
            <span>Monitoramento</span>
          </a>
        </li>
        <li class="nav-item">
          <button class="nav-link" id="faq-btn">
            <i class="fas fa-question-circle"></i>
            <span>FAQ</span>
          </button>
        </li>
      </ul>

      <div class="sidebar-footer">
        Solution Tecnologia &copy; 2025
      </div>
    </aside>

    <main class="main-content">
      <div class="header">
        <h1>Dashboard do Administrador</h1>
        <div class="header-actions">
          <button class="notification-btn" aria-label="Notificações">
            <i class="fas fa-bell"></i>
            <span class="notification-badge">5</span>
          </button>
          <button class="logout-btn" onclick="window.location.href='../../login.html'" aria-label="Sair">
            <i class="fas fa-sign-out-alt"></i> Sair
          </button>
        </div>
      </div>

      <div class="welcome-banner">
        <h2>Bem-vindo ao Painel Administrativo</h2>
        <p>Gerencie chamados, requisições LGPD, monitore a rede e administre usuários.</p>
      </div>

      <div class="stats-cards">
        <div class="stat-card">
          <div class="stat-icon itil-icon">
            <i class="fas fa-tasks"></i>
          </div>
          <div class="stat-info">
            <h3 id="tickets-count">0</h3>
            <p>Chamados Abertos</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon lgpd-icon">
            <i class="fas fa-shield-alt"></i>
          </div>
          <div class="stat-info">
            <h3 id="lgpd-requests">0</h3>
            <p>Requisições LGPD</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon status-icon">
            <i class="fas fa-signal"></i>
          </div>
          <div class="stat-info">
            <h3 id="system-status">Online</h3>
            <p>Status do Sistema</p>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon users-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="stat-info">
            <h3 id="users-count">0</h3>
            <p>Usuários Ativos</p>
          </div>
        </div>
      </div>

      <div class="charts-section">
        <div class="chart-card">
          <div class="chart-header">
            <h3>Status dos Chamados</h3>
            <select class="chart-filter" id="ticket-filter" aria-label="Filtro de Chamados">
              <option value="week">Esta Semana</option>
              <option value="month" selected>Este Mês</option>
              <option value="all">Todos</option>
            </select>
          </div>
          <div class="chart-container">
            <canvas id="tickets-chart"></canvas>
          </div>
        </div>

        <div class="chart-card">
          <div class="chart-header">
            <h3>Requisições LGPD</h3>
            <select class="chart-filter" id="lgpd-filter" aria-label="Filtro de Requisições LGPD">
              <option value="week">Esta Semana</option>
              <option value="month" selected>Este Mês</option>
              <option value="all">Todos</option>
            </select>
          </div>
          <div class="chart-container">
            <canvas id="lgpd-chart"></canvas>
          </div>
        </div>
      </div>

      <div class="charts-section">
        <div class="chart-card">
          <div class="chart-header">
            <h3>Chamados por Categoria</h3>
            <select class="chart-filter" id="category-filter" aria-label="Filtro de Categorias">
              <option value="month" selected>Este Mês</option>
              <option value="all">Todos</option>
            </select>
          </div>
          <div class="chart-container">
            <canvas id="category-chart"></canvas>
          </div>
        </div>

        <div class="chart-card">
          <div class="chart-header">
            <h3>Performance da Rede</h3>
            <select class="chart-filter" id="network-filter" aria-label="Filtro de Rede">
              <option value="week" selected>Última Semana</option>
              <option value="month">Último Mês</option>
            </select>
          </div>
          <div class="chart-container">
            <canvas id="network-chart"></canvas>
          </div>
        </div>
      </div>

      <div class="status-panel">
        <div class="status-header">
          <h2>Status do Sistema</h2>
        </div>
        <div class="status-grid">
          <div class="status-item">
            <h3 id="wifi-status">Online</h3>
            <p>Rede WiFi</p>
          </div>
          <div class="status-item">
            <h3 id="system-status-main">Online</h3>
            <p>Sistema Acadêmico</p>
          </div>
          <div class="status-item">
            <h3 id="email-status">Online</h3>
            <p>Servidor de Email</p>
          </div>
          <div class="status-item">
            <h3 id="portal-status">Online</h3>
            <p>Portal do Aluno</p>
          </div>
        </div>
        <ul class="status-list" id="status-list"></ul>
      </div>

      <div class="tickets-panel">
        <div class="tickets-header">
          <h2>Chamados Pendentes</h2>
          <a href="itilAdm.html" class="view-all-btn">Ver Todos</a>
        </div>
        <ul class="tickets-list" id="tickets-list"></ul>
      </div>

      <section class="actions-section">
        <div class="actions-header">
          <h2>Ações Rápidas</h2>
        </div>
        <div class="actions-grid">
          <a href="itilAdm.html" class="action-btn">
            <i class="fas fa-tasks"></i>
            <span>Gerenciar Chamados</span>
          </a>
          <a href="lgpd-adm.html" class="action-btn">
            <i class="fas fa-shield-alt"></i>
            <span>Gerenciar LGPD</span>
          </a>
          <a href="network.html" class="action-btn">
            <i class="fas fa-network-wired"></i>
            <span>Monitorar Rede</span>
          </a>
          <a href="#" class="action-btn">
            <i class="fas fa-users"></i>
            <span>Gerenciar Usuários</span>
          </a>
        </div>
      </section>

      <section class="activity-section">
        <div class="activity-header">
          <h2>Atividade Recente</h2>
          <a href="#" class="view-all-btn">Ver Tudo</a>
        </div>
        <ul class="activity-list" id="activity-list"></ul>
      </section>
    </main>
  </div>

  <div class="modal" id="faqModal" role="dialog" aria-labelledby="faqModalTitle">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="faqModalTitle">Perguntas Frequentes (FAQ)</h3>
        <button class="close" id="closeFaq" aria-label="Fechar">&times;</button>
      </div>
      <div class="modal-body">
        <div class="accordion-item">
          <div class="accordion-header" data-toggle="accordion1" role="button" aria-expanded="false" aria-controls="accordion1">
            <h4>Como gerenciar chamados como administrador?</h4>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="accordion-content" id="accordion1">
            Acesse a seção "Gestão de Chamados" no menu lateral para visualizar, atribuir e atualizar o status dos chamados. Você pode filtrar por prioridade, status ou usuário.
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header" data-toggle="accordion2" role="button" aria-expanded="false" aria-controls="accordion2">
            <h4>Como processar requisições LGPD?</h4>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="accordion-content" id="accordion2">
            Na seção "Gestão LGPD", você pode revisar, aprovar ou rejeitar requisições de acesso, correção, exclusão ou portabilidade de dados. Certifique-se de seguir as diretrizes da LGPD.
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header" data-toggle="accordion3" role="button" aria-expanded="false" aria-controls="accordion3">
            <h4>Como monitorar a performance da rede?</h4>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="accordion-content" id="accordion3">
            Acesse a seção "Monitoramento" para visualizar métricas em tempo real, como latência, tráfego e status dos dispositivos de rede. Configure alertas para anomalias.
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header" data-toggle="accordion4" role="button" aria-expanded="false" aria-controls="accordion4">
            <h4>Como gerenciar usuários no sistema?</h4>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="accordion-content" id="accordion4">
            Na seção "Gerenciar Usuários", você pode adicionar, editar ou desativar contas de usuários, além de atribuir papéis como administrador ou usuário padrão.
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header" data-toggle="accordion5" role="button" aria-expanded="false" aria-controls="accordion5">
            <h4>Como configurar alertas de sistema?</h4>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="accordion-content" id="accordion5">
            Na seção "Monitoramento", vá para as configurações de alertas e defina notificações para eventos como falhas de sistema, alta latência ou violações de segurança.
          </div>
        </div>
        <div class="accordion-item">
          <div class="accordion-header" data-toggle="accordion6" role="button" aria-expanded="false" aria-controls="accordion6">
            <h4>O que fazer em caso de falha crítica?</h4>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="accordion-content" id="accordion6">
            Verifique o "Status do Sistema" no dashboard. Para falhas críticas, priorize a abertura de um chamado de alta prioridade ou contate a equipe de TI imediatamente.
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" id="closeFaqBtn">Fechar</button>
      </div>
    </div>
  </div>

  <div class="theme-toggle" id="theme-toggle" role="button" aria-label="Alternar Tema">
    <i class="fas fa-sun"></i>
  </div>

  <script>
    let ticketsChart, lgpdChart, categoryChart, networkChart;

    const sampleStatus = [
      { system: "Rede WiFi", status: "Online", time: "Atualizado agora" },
      { system: "Sistema Acadêmico", status: "Online", time: "Atualizado agora" },
      { system: "Servidor de Email", status: "Online", time: "Atualizado agora" },
      { system: "Portal do Aluno", status: "Online", time: "Atualizado agora" }
    ];

    function initializeData() {
      if (!localStorage.getItem('incidents')) {
        const incidents = [
          { id: "TCK-001", title: "Problema com WiFi", description: "Não consigo conectar à rede WiFi", priority: "Média", status: "Em Andamento", date: new Date().toISOString(), user: "João Silva", userEmail: "joao@faculdade.edu", category: "Rede" },
          { id: "TCK-002", title: "Acesso ao sistema negado", description: "Erro de login no sistema acadêmico", priority: "Alta", status: "Pendente", date: new Date().toISOString(), user: "Maria Oliveira", userEmail: "maria@faculdade.edu", category: "Sistema" },
          { id: "TCK-003", title: "Impressora não funciona", description: "Impressora do laboratório 1 não responde", priority: "Baixa", status: "Resolvido", date: new Date().toISOString(), user: "Pedro Santos", userEmail: "pedro@faculdade.edu", category: "Hardware" },
          { id: "TCK-004", title: "Email não chega", description: "Não estou recebendo emails importantes", priority: "Média", status: "Em Andamento", date: new Date().toISOString(), user: "Ana Costa", userEmail: "ana@faculdade.edu", category: "Email" },
          { id: "TCK-005", title: "Problema com senha", description: "Não consigo alterar minha senha no portal", priority: "Alta", status: "Resolvido", date: new Date().toISOString(), user: "Lucas Mendes", userEmail: "lucas@faculdade.edu", category: "Sistema" }
        ];
        localStorage.setItem('incidents', JSON.stringify(incidents));
      }

      if (!localStorage.getItem('requests')) {
        const requests = [
          { id: "REQ-0001", requesterName: "João Silva", requesterEmail: "joao@faculdade.edu", type: "Acesso", status: "Pendente", priority: "Média", description: "Solicitação de acesso aos dados pessoais.", date: new Date().toISOString(), history: [{ type: "create", text: "Requisição criada", date: new Date().toISOString() }] },
          { id: "REQ-0002", requesterName: "Maria Oliveira", requesterEmail: "maria@faculdade.edu", type: "Correção", status: "Concluído", priority: "Baixa", description: "Correção de dados cadastrais.", date: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(), history: [{ type: "create", text: "Requisição criada", date: new Date().toISOString() }] }
        ];
        localStorage.setItem('requests', JSON.stringify(requests));
      }

      if (!localStorage.getItem('users')) {
        const users = [
          { username: "João Silva", email: "joao@faculdade.edu", role: "Usuário", type: "user" },
          { username: "Maria Oliveira", email: "maria@faculdade.edu", role: "Usuário", type: "user" },
          { username: "Administrador", email: "admin@faculdade.edu", role: "Administrador", type: "admin" }
        ];
        localStorage.setItem('users', JSON.stringify(users));
      }
    }

    function loadCounts() {
      const incidents = JSON.parse(localStorage.getItem('incidents')) || [];
      const requests = JSON.parse(localStorage.getItem('requests')) || [];
      const users = JSON.parse(localStorage.getItem('users')) || [];

      document.getElementById('tickets-count').textContent = incidents.filter(t => t.status !== 'Resolvido').length;
      document.getElementById('lgpd-requests').textContent = requests.filter(r => r.status !== 'Concluído').length;
      document.getElementById('users-count').textContent = users.filter(u => u.type === 'user').length;
    }

    function createCharts() {
      const incidents = JSON.parse(localStorage.getItem('incidents')) || [];
      const requests = JSON.parse(localStorage.getItem('requests')) || [];

      const ticketFilter = document.getElementById('ticket-filter').value;
      const lgpdFilter = document.getElementById('lgpd-filter').value;
      const categoryFilter = document.getElementById('category-filter').value;
      const networkFilter = document.getElementById('network-filter').value;

      const now = new Date();
      const oneWeekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
      const oneMonthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);

      const filterByTime = (items, filter) => {
        if (filter === 'week') return items.filter(item => new Date(item.date) >= oneWeekAgo);
        if (filter === 'month') return items.filter(item => new Date(item.date) >= oneMonthAgo);
        return items;
      };

      const filteredIncidents = filterByTime(incidents, ticketFilter);
      const filteredRequests = filterByTime(requests, lgpdFilter);
      const filteredCategoryIncidents = filterByTime(incidents, categoryFilter);

      // Gráfico de Status dos Chamados
      const ticketData = {
        labels: ['Resolvidos', 'Em Andamento', 'Pendentes'],
        datasets: [{
          data: [
            filteredIncidents.filter(t => t.status === 'Resolvido').length,
            filteredIncidents.filter(t => t.status === 'Em Andamento').length,
            filteredIncidents.filter(t => t.status === 'Pendente' || t.status === 'Aberto').length
          ],
          backgroundColor: ['#30D158', '#0A84FF', '#FF9F0A'],
          borderWidth: 0,
          hoverOffset: 10
        }]
      };

      // Gráfico de Requisições LGPD
      const lgpdData = {
        labels: ['Pendente', 'Em Andamento', 'Concluído'],
        datasets: [{
          data: [
            filteredRequests.filter(r => r.status === 'Pendente').length,
            filteredRequests.filter(r => r.status === 'Em Andamento').length,
            filteredRequests.filter(r => r.status === 'Concluído').length
          ],
          backgroundColor: ['#FF9F0A', '#0A84FF', '#30D158'],
          borderWidth: 0,
          hoverOffset: 10
        }]
      };

      // Gráfico de Chamados por Categoria
      const categories = [...new Set(filteredCategoryIncidents.map(t => t.category))];
      const categoryCounts = categories.map(cat => 
        filteredCategoryIncidents.filter(t => t.category === cat).length
      );

      const categoryData = {
        labels: categories,
        datasets: [{
          label: 'Chamados',
          data: categoryCounts,
          backgroundColor: ['#8906E6', '#FF00E2', '#050DEB', '#FF9F0A', '#30D158'],
          borderWidth: 0,
          hoverOffset: 10
        }]
      };

      // Gráfico de Performance da Rede (Simulado)
      const days = networkFilter === 'week' ? 7 : 30;
      const networkLabels = [];
      const networkData = [];

      for (let i = days - 1; i >= 0; i--) {
        const date = new Date();
        date.setDate(date.getDate() - i);
        const dateStr = date.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });
        networkLabels.push(dateStr);
        networkData.push(Math.floor(Math.random() * 100)); // Dados simulados para latência
      }

      const networkChartData = {
        labels: networkLabels,
        datasets: [{
          label: 'Latência da Rede (ms)',
          data: networkData,
          borderColor: '#8906E6',
          backgroundColor: 'rgba(137, 6, 230, 0.1)',
          borderWidth: 2,
          fill: true,
          tension: 0.4
        }]
      };

      const chartOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
            labels: {
              color: getComputedStyle(document.documentElement).getPropertyValue('--text-dark').trim(),
              font: { size: 12 },
              padding: 20
            }
          },
          tooltip: {
            callbacks: {
              label: context => `${context.label}: ${context.raw}`
            }
          }
        },
        animation: {
          animateScale: true,
          animateRotate: true
        }
      };

      const lineChartOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
            labels: {
              color: getComputedStyle(document.documentElement).getPropertyValue('--text-dark').trim(),
              font: { size: 12 },
              padding: 20
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            ticks: {
              color: getComputedStyle(document.documentElement).getPropertyValue('--text-secondary-dark').trim()
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.1)'
            }
          },
          x: {
            ticks: {
              color: getComputedStyle(document.documentElement).getPropertyValue('--text-secondary-dark').trim()
            },
            grid: {
              color: 'rgba(255, 255, 255, 0.1)'
            }
          }
        }
      };

      const ticketsCtx = document.getElementById('tickets-chart').getContext('2d');
      const lgpdCtx = document.getElementById('lgpd-chart').getContext('2d');
      const categoryCtx = document.getElementById('category-chart').getContext('2d');
      const networkCtx = document.getElementById('network-chart').getContext('2d');

      if (ticketsChart) ticketsChart.destroy();
      if (lgpdChart) lgpdChart.destroy();
      if (categoryChart) categoryChart.destroy();
      if (networkChart) networkChart.destroy();

      ticketsChart = new Chart(ticketsCtx, { type: 'pie', data: ticketData, options: chartOptions });
      lgpdChart = new Chart(lgpdCtx, { type: 'doughnut', data: lgpdData, options: chartOptions });
      categoryChart = new Chart(categoryCtx, { type: 'bar', data: categoryData, options: chartOptions });
      networkChart = new Chart(networkCtx, { type: 'line', data: networkChartData, options: lineChartOptions });
    }

    function loadTickets() {
      const ticketsList = document.getElementById('tickets-list');
      ticketsList.innerHTML = '';

      const incidents = JSON.parse(localStorage.getItem('incidents')) || [];
      const pendingIncidents = incidents.filter(t => t.status !== 'Resolvido');

      if (pendingIncidents.length === 0) {
        ticketsList.innerHTML = '<li class="ticket-item"><div class="ticket-info">Nenhum chamado pendente encontrado</div></li>';
        return;
      }

      pendingIncidents.slice(0, 5).forEach(ticket => {
        const listItem = document.createElement('li');
        listItem.className = 'ticket-item';

        let priorityClass = '';
        if (ticket.priority === 'Alta') priorityClass = 'priority-high';
        else if (ticket.priority === 'Média') priorityClass = 'priority-medium';
        else if (ticket.priority === 'Baixa') priorityClass = 'priority-low';

        listItem.innerHTML = `
          <div class="ticket-info">
            <div>
              <span class="ticket-id">${ticket.id}</span>
              <span class="ticket-priority ${priorityClass}">${ticket.priority}</span>
            </div>
            <div class="ticket-title">${ticket.title}</div>
            <div style="font-size: 12px; color: var(--text-secondary-dark);">Status: ${ticket.status} • Categoria: ${ticket.category} • Usuário: ${ticket.user}</div>
          </div>
          <div class="ticket-time">${new Date(ticket.date).toLocaleDateString()}</div>
        `;

        ticketsList.appendChild(listItem);
      });
    }

    function loadStatus() {
      const statusList = document.getElementById('status-list');
      statusList.innerHTML = '';

      sampleStatus.forEach(status => {
        const listItem = document.createElement('li');
        listItem.className = 'status-list-item';

        let statusClass = '';
        if (status.status === 'Online') statusClass = 'status-online';
        else if (status.status === 'Offline') statusClass = 'status-offline';
        else if (status.status === 'Manutenção') statusClass = 'status-warning';

        listItem.innerHTML = `
          <div class="status-info">
            <div class="status-value">${status.system}</div>
            <div class="status-indicator ${statusClass}">${status.status}</div>
          </div>
          <div class="ticket-time">${status.time}</div>
        `;

        statusList.appendChild(listItem);
      });
    }

    function loadRecentActivities() {
      const activityList = document.getElementById('activity-list');
      activityList.innerHTML = '';

      const incidents = JSON.parse(localStorage.getItem('incidents')) || [];
      const requests = JSON.parse(localStorage.getItem('requests')) || [];

      const activities = [
        ...incidents.map(t => ({
          id: t.id,
          title: `Novo chamado aberto: ${t.title}`,
          module: 'ITIL',
          status: t.status,
          time: new Date(t.date).toLocaleString(),
          user: t.user
        })),
        ...requests.map(r => ({
          id: r.id,
          title: `Requisição LGPD enviada: ${r.type}`,
          module: 'LGPD',
          status: r.status,
          time: new Date(r.date).toLocaleString(),
          user: r.requesterName
        })),
        {
          id: "ACT-001",
          title: "Sistema atualizado com sucesso",
          module: "Sistema",
          status: "Concluído",
          time: new Date(Date.now() - 2 * 60 * 60 * 1000).toLocaleString(),
          user: "Administrador"
        },
        {
          id: "ACT-002",
          title: "Manutenção preventiva agendada",
          module: "Manutenção",
          status: "Agendado",
          time: new Date(Date.now() - 5 * 60 * 60 * 1000).toLocaleString(),
          user: "Administrador"
        }
      ].sort((a, b) => new Date(b.time) - new Date(a.time)).slice(0, 5);

      activities.forEach(activity => {
        const listItem = document.createElement('li');
        listItem.className = 'activity-item';

        let iconClass = '';
        if (activity.module === 'ITIL') iconClass = 'activity-itil';
        else if (activity.module === 'LGPD') iconClass = 'activity-lgpd';
        else if (activity.module === 'Sistema') iconClass = 'activity-itil';
        else iconClass = 'activity-lgpd';

        let statusColor = '';
        if (activity.status === 'Pendente' || activity.status === 'Aberto') statusColor = 'color: #FF9F0A;';
        else if (activity.status === 'Resolvido' || activity.status === 'Concluído') statusColor = 'color: #30D158;';
        else if (activity.status === 'Em Andamento' || activity.status === 'Agendado') statusColor = 'color: #0A84FF;';

        listItem.innerHTML = `
          <div class="activity-icon ${iconClass}">
            <i class="fas ${activity.module === 'ITIL' ? 'fa-tasks' : activity.module === 'LGPD' ? 'fa-shield-alt' : 'fa-cogs'}"></i>
          </div>
          <div class="activity-content">
            <div class="activity-title">${activity.title}</div>
            <div class="activity-desc">Módulo: ${activity.module} • <span style="${statusColor}">Status: ${activity.status}</span></div>
            <div class="activity-time">${activity.time} • Por: ${activity.user}</div>
          </div>
        `;

        activityList.appendChild(listItem);
      });
    }

    function toggleTheme() {
      const body = document.body;
      const currentTheme = body.getAttribute('data-theme');
      const themeToggle = document.getElementById('theme-toggle');

      if (currentTheme === 'light') {
        body.setAttribute('data-theme', 'dark');
        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        localStorage.setItem('theme', 'dark');
      } else {
        body.setAttribute('data-theme', 'light');
        themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        localStorage.setItem('theme', 'light');
      }

      if (ticketsChart) ticketsChart.update();
      if (lgpdChart) lgpdChart.update();
      if (categoryChart) categoryChart.update();
      if (networkChart) networkChart.update();
    }

    function logout() {
      if (confirm('Tem certeza que deseja sair?')) {
        localStorage.removeItem('user');
        alert('Logout realizado com sucesso!');
        window.location.href = 'login.html';
      }
    }

    function openModal(modalId) {
      const modal = document.getElementById(modalId);
      modal.style.display = 'flex';
      modal.querySelector('.modal-content').focus();
    }

    function closeModal(modalId) {
      const modal = document.getElementById(modalId);
      modal.style.display = 'none';
      document.querySelector('.main-content').focus();
    }

    function toggleAccordion(event) {
      const header = event.currentTarget;
      const contentId = header.getAttribute('data-toggle');
      const content = document.getElementById(contentId);
      const isActive = header.classList.contains('active');

      document.querySelectorAll('.accordion-header').forEach(h => {
        h.classList.remove('active');
        h.setAttribute('aria-expanded', 'false');
      });
      document.querySelectorAll('.accordion-content').forEach(c => c.classList.remove('active'));

      if (!isActive) {
        header.classList.add('active');
        header.setAttribute('aria-expanded', 'true');
        content.classList.add('active');
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      initializeData();

      const savedTheme = localStorage.getItem('theme') || 'dark';
      document.body.setAttribute('data-theme', savedTheme);
      document.getElementById('theme-toggle').innerHTML = savedTheme === 'light' ? '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';

      const user = JSON.parse(localStorage.getItem('user')) || { username: 'Administrador', role: 'Administrador', type: 'admin', email: 'admin@faculdade.edu' };
      document.getElementById('username').textContent = user.username;
      document.getElementById('userrole').textContent = user.role;

      if (user.type !== 'admin') {
        alert('Acesso não autorizado. Redirecionando para login.');
        logout();
        return;
      }

      loadCounts();
      createCharts();
      loadTickets();
      loadStatus();
      loadRecentActivities();

      document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
      document.getElementById('ticket-filter').addEventListener('change', createCharts);
      document.getElementById('lgpd-filter').addEventListener('change', createCharts);
      document.getElementById('category-filter').addEventListener('change', createCharts);
      document.getElementById('network-filter').addEventListener('change', createCharts);

      document.getElementById('faq-btn').addEventListener('click', () => openModal('faqModal'));
      document.getElementById('closeFaq').addEventListener('click', () => closeModal('faqModal'));
      document.getElementById('closeFaqBtn').addEventListener('click', () => closeModal('faqModal'));
      document.querySelectorAll('.accordion-header').forEach(header => {
        header.addEventListener('click', toggleAccordion);
      });

      window.addEventListener('click', function(e) {
        if (e.target.classList.contains('modal')) {
          closeModal(e.target.id);
        }
      });

      // Keyboard accessibility for modal
      document.getElementById('faqModal').addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeModal('faqModal');
        }
      });
    });
  </script>
</body>
</html>